!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TweakpaneInfodumpPlugin={})}(this,(function(e){"use strict";function t(){return{id:"infodump",type:"blade",css:'div.infodump_wrap{background-color:rgba(255,255,255,.15);border-radius:6px;margin-left:-2px;margin-right:-2px;padding:4px 6px 6px;position:relative;text-align:center}div.infodump_title{color:var(--tp-input-fg);text-align:center;opacity:.7;text-transform:uppercase;font-size:11px;margin-bottom:6px}div.infodump_container{display:flex;flex-direction:column;align-items:stretch;text-align:center}div.infodump_value{color:var(--tp-input-fg);font-family:var(--tp-font-family);text-align:center;font-size:11px;margin:auto;opacity:.9;display:flex;flex-direction:row;align-items:center}div.infodump_graph{opacity:.5;margin-top:0}div.infodump_padded{padding-top:4px}div.infodump_nomargin{margin:0}div.infodump_nocursor{cursor:default!important}div.infodump_copy{position:absolute;top:4px;right:4px;background-color:var(--tp-button-bg);height:20px;width:20px;display:flex;align-items:center;justify-content:center;cursor:pointer}div.infodump_copy:hover{background-color:var(--tp-button-bg-hover)}div.infodump_copy>svg{height:10px;width:10px}div.infodump_copy>svg>path{fill:var(--tp-button-fg)}',accept:e=>"obj"===e.params.view&&"blade"===e.params.label,controller:function(e){const t=e.document.createElement("div");t.style.height="auto",t.style.lineHeight="1.0",t.style.overflow="hidden",t.style.position="relative";const n=e.document.createElement("div");n.classList.add("infodump_wrap"),t.appendChild(n);let i,o=null;if(e.params.title){o=e.document.createElement("div");const t=e.document.createElement("div");t.classList.add("infodump_title"),t.textContent=e.params.title,o.appendChild(t),n.appendChild(o),i=e.document.createElement("div"),i.classList.add("infodump_container"),n.appendChild(i)}else i=n;const a=e.params.value,l=[];for(const t of a){const n=e.document.createElement("div");n.classList.add("infodump_value");for(const i of t){const t=e.document.createElement("div");t.textContent=i,t.classList.add("infodump_nomargin"),n.appendChild(t)}i.appendChild(n),l.push(n)}if(e.params.copy){const t=e.document.createElement("div");t.classList.add("infodump_copy"),n.appendChild(t);const i=e.document.createElement("svg");i.setAttribute("viewBox","0 0 100 100"),t.appendChild(i);const o=e.document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d","M 60 0 L 60 20 L 80 20 L 80 100 L 0 100 L 0 0 L 60 0 M 22 38 L 22 82 L 58 82 L 58 38 L 22 38 M 30 22 L 30 30 L 50 30 L 50 50 L 58 50 L 58 22 L 30 22"),i.appendChild(o),t.addEventListener("click",(()=>{var t,n,i;t=e.params.textfn(a),n=!0,i=!1,{writeText:e=>new Promise(((t,i)=>{if(Object.prototype.toString.call(e).indexOf("String")===-1)return i(new TypeError("Argument must be a string"));navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(t).catch(i):n?(function(e){const t=document.createElement("span");t.textContent=e,t.style.whiteSpace="pre",t.style.webkitUserSelect="auto",t.style.userSelect="all",document.body.appendChild(t);const n=window.getSelection(),i=window.document.createRange();i.selectNode(t),null!=n&&(n.removeAllRanges(),n.addRange(i)),i.selectNode(t),window.document.execCommand("copy"),n?.removeAllRanges(),window.document.body.removeChild(t)}(e),t(!0)):i(new Error("No clipboard writeText API, and couldn't get permission to use the workaround"))}))}?.writeText(t)}))}const d=Object.assign(Object.assign({},e.params.opts||{}),{animate:e.params.animate||!1,axis:e.params.axis||null,fill:e.params.fill||!1,lineCount:e.params.lineCount||1,max:e.params.max||1,min:e.params.min||0});let s=null;if(e.params.graph){const t=e.document.createElement("div");t.classList.add("infodump_graph"),t.classList.add("infodump_padded"),i.appendChild(t);const n=new Array(e.params.graph.length);for(let t=0;t<e.params.graph.length;t++)n[t]=[];const o=function(e){const t=e.document.createElement("canvas");return t.dataset.lineCount=e.lineCount.toString(),t.dataset.animate=e.animate.toString(),e.axis&&(t.dataset.axis=e.axis),t.dataset.fill=e.fill.toString(),t.dataset.min=e.min.toString(),t.dataset.max=e.max.toString(),t.height=60,t.style.cursor=e.animate||e.axis?"crosshair":"default",t.style.display="block",t.style.height="100%",t.style.marginTop="2px",t.style.marginBottom="2px",t.style.width="100%",t}(d);t.appendChild(o);let a=null,l=0,r=0;const p=e.params.tooltipFn;if(e.params.animate||e.params.axis){const t=e.document.createElement("div");t.classList.add("infodump_value"),t.classList.add("infodump_padded"),t.style.position="absolute",t.style.display="inline-block",t.style.left="0",t.style.padding="0 4px",t.style.top="0",t.style.backgroundColor="rgba(0, 0, 0, 0.5)",t.style.opacity="0",t.style.borderRadius="2px",t.style.pointerEvents="none",t.style.zIndex="100",t.style.transition="opacity 0.1s ease-in-out",i.appendChild(t),a=t;const n=()=>{if(null===a)return;const t=o.getBoundingClientRect();l=t.width,r=t.height,e.params.animate&&(a.style.left=`${l/2-a.offsetWidth/2}px`,a.style.top=`${r/2-a.offsetHeight/2}px`,a.textContent=p(e.params.graph,o.dataset.tooltipIndex))};window.addEventListener("resize",n),e.params.animate&&n()}const c=new Set;o.addEventListener("mousemove",(t=>{if(null===a||!e.params.axis)return;const i=t.offsetX,n=t.offsetY,d=o.getBoundingClientRect(),s=i/d.width,h=n/d.height,m=e.params.graph.length;let u=-1;const x=1/m;for(let e=0;e<m;e++){const t=e*x,n=(e+1)*x;if(s>=t&&s<=n){u=e;break}}if(-1===u)return;let f=!1;for(const e of c)e!==u&&(c.delete(e),f=!0);c.has(u)||(c.add(u),f=!0),f&&(o.dataset.tooltipIndex=u.toString(),a.textContent=p(e.params.graph,u),a.style.left=`${i-a.offsetWidth/2}px`,a.style.top=`${n-a.offsetHeight-4}px`,a.style.opacity="1")})),o.addEventListener("mouseleave",(()=>{null!==a&&(a.style.opacity="0")}));const h=(e,t)=>{const i=o.getContext("2d");if(!i)return;const a=o.getBoundingClientRect();o.width=a.width,o.height=a.height,i.clearRect(0,0,o.width,o.height);const l=o.width,r=o.height,p="true"===o.dataset.fill,c=parseInt(o.dataset.lineCount,10),h=parseFloat(o.dataset.min),m=parseFloat(o.dataset.max),u=m-h,x=t?r-20:r,f=t?l-20:l,g=t?10:0,b=t?10:0;i.lineWidth=1,i.lineJoin="round",i.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--tp-input-fg");const v=[];for(let e=0;e<c;e++)v.push([]);for(const t of e)for(let e=0;e<c;e++){const i=t[e];if(null!=i){const t=v[e];t.push((i-h)/u)}}const y=f/(v[0].length-1),E=v.map((e=>e.map(((e,t)=>[g+t*y,b+x*(1-e)])))),w=["#8aefe4","#9083f7","#c982ec","#ea8a5d","#aacf53","#4cc1c7","#5485cb","#bf83f3","#eb85ab","#fdc15d"];if(p){i.globalAlpha=.4;for(let e=0;e<c;e++){const t=E[e];if(t.length>1){const n=w[e%w.length];i.fillStyle=n,i.beginPath(),i.moveTo(t[0][0],x+b),i.lineTo(t[0][0],t[0][1]);for(let e=1;e<t.length;e++)i.lineTo(t[e][0],t[e][1]);i.lineTo(t[t.length-1][0],x+b),i.fill()}}i.globalAlpha=1}for(let e=0;e<c;e++){const t=E[e];if(t.length>1){const n=w[e%w.length];i.strokeStyle=n,i.beginPath(),i.moveTo(t[0][0],t[0][1]);for(let e=1;e<t.length;e++)i.lineTo(t[e][0],t[e][1]);i.stroke()}}n.splice(d.lineCount);for(let t=0;t<e.length;t++)for(let i=0;i<d.lineCount;i++){const o=e[t][i];null!=o&&(o<d.min||o>d.max||n[i].push(o))}};e.params.animate&&(requestAnimationFrame((()=>{setInterval((()=>{if(null===a)return;const e=o.getBoundingClientRect();e.width===l&&e.height===r||(l=e.width,r=e.height,a.style.left=`${l/2-a.offsetWidth/2}px`,a.style.top=`${r/2-a.offsetHeight/2}px`);const t=parseInt(o.dataset.tooltipIndex,10);isNaN(t)||"true"!==o.dataset.animate||(a.textContent=p(e.params.graph,t))}),200)})),s=()=>{h(e.params.graph,d.axis)})}return{element:t,update:e=>{if(l.length===e.value.length)for(let t=0;t<e.value.length;t++)l[t].textContent=e.value[t];else{for(;i.firstChild;)i.removeChild(i.firstChild);const t=e.value;for(const n of t){const t=e.document.createElement("div");t.classList.add("infodump_value");for(const i of n){const n=e.document.createElement("div");n.textContent=i,n.classList.add("infodump_nomargin"),t.appendChild(n)}i.appendChild(t),l.push(t)}null!==o&&(o.textContent=e.title||"")}e.params.graph&&s&&(e.params.graph=e.graph,s())}}}}}class n{constructor(e){this.controller_=e}get element(){return this.controller_.element}dispose(){}}class i{constructor(e,t){this.obj=e,this.blade=t}}const o={id:"infodump",type:"blade",accept:e=>"obj"===e.params.view&&"blade"===e.params.label,controller:e=>new n(t().controller(e)),api:e=>new i(e.controller.valueController.value,e)};e.infodumpBladePlugin=o,Object.defineProperty(e,"__esModule",{value:!0})})); 